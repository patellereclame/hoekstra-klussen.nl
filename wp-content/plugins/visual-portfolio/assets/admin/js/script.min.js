!function(e){function t(n){if(a[n])return a[n].exports;var i=a[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var a={};t.m=e,t.c=a,t.d=function(e,a,n){t.o(e,a)||Object.defineProperty(e,a,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(a,"a",a),a},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=183)}({183:function(e,t,a){e.exports=a(184)},184:function(e,t){function a(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return Array.from(e)}function n(){_[y.is(":checked")?"show":"hide"]()}function i(){var e=r('[name="vp_popup_gallery[show_caption]"]');e.closest("tbody").find("tr.caption_title, tr.caption_description")[e.is(":checked")?"show":"hide"]()}var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r=jQuery,l=window,s=l.ajaxurl,c=l.VPAdminVariables,d=l.Tooltip,p=l.CodeMirror,v=l.emmetCodeMirror,m=r("body"),u=r(window),f=r('form[name="post"]'),g=r('[name="post_type"]'),h=r("#postID, #post_ID").eq(0).val();m.on("focus",'[name="vp_list_shortcode"], [name="vp_filter_shortcode"]',function(){this.select()}),m.on("click",".vp-onclick-selection",function(){window.getSelection().selectAllChildren(this)});var _=r("#vp_format_video"),y=r("#post-format-video");_.length&&y.length&&(n(),m.on("change","[name=post_format]",function(){n()}));var b=null,w=void 0;m.on("change input",'.vp-input[name="video_url"]',function(){null!==b&&b.abort();var e=r(this);e.next(".vp-oembed-preview").html(""),clearTimeout(w),w=setTimeout(function(){b=r.ajax({url:s,method:"GET",dataType:"json",data:{action:"vp_find_oembed",q:e.val(),nonce:c.nonce},complete:function(t){var a=t.responseJSON;a&&void 0!==a.html&&e.next(".vp-oembed-preview").html(a.html)}})},250)}),void 0!==d&&r('[data-hint]:not([data-hint=""]):not([data-hint="false"])').each(function(){var e=r(this);new d(this,{placement:e.attr("data-hint-place")||"top",title:e.attr("data-hint"),container:r("body")[0],boundariesElement:"viewport"})}),function(){function e(){var e="",t=r('[name="vp_controls_styles"]'),a=".vp-id-"+h,n=t.val();r('.vp-control-style [type="hidden"]').each(function(){var t=r(this),n=t.closest(".vp-control");if("none"!==n.css("display")){var i=n.find(t.attr("data-style-from")).val();e&&(e+=" "),e+=a+" "+t.attr("data-style-element")+" { "+t.attr("data-style-property")+": "+i+"; }"}}),n!==e&&t.val(e).trigger("vp-fake-change")}function t(e,t){var a=e.find('[data-image-id="'+t+'"]'),n={id:t};return a.find("[data-additional]").each(function(){var e=r(this),t=e.attr("data-additional");if(n[t]=e.html(),"true"===e.attr("data-to-json"))try{n[t]=JSON.parse(n[t])}catch(e){n[t]=""}}),n}function n(e,t){var a=e.find('[data-image-id="'+t+'"]'),n={};return a.find("[data-meta]").each(function(){n[r(this).attr("data-meta")]=r(this).html()}),n}function i(e){var a=[];e.children(".vp-control-gallery-items").find(".vp-control-gallery-items-img").each(function(){a.push(t(e,r(this).attr("data-image-id")))});var n=JSON.stringify(a),i=e.children("textarea");n!==i.val()&&i.val(n).change()}function l(e,i){var o=e.children("textarea").attr("name"),l=e.children(".vp-control-gallery-additional-data"),s=l.children(".vp-control-gallery-additional-data-preview"),c=e.children(".vp-control-gallery-items").find('.vp-control-gallery-items-img[data-image-id="'+i+'"]'),d=t(e,i),p=n(e,i);d&&Object.keys(d).forEach(function(n){var i=l.find('[name="'+o+"_additional_"+n+'"], [name="'+o+"_additional_"+n+'[]"]').val(d[n]||"");if(i.hasClass("vp-select2")){if(i.hasClass("vp-select2-tags")){var s=[],c=[];e.children(".vp-control-gallery-items").find(".vp-control-gallery-items-img").each(function(){var i=t(e,r(this).attr("data-image-id"));i&&void 0!==i[n]&&i[n]&&(s=[].concat(a(new Set([].concat(a(s),a(i[n]))))))}),s.forEach(function(e){c.push(new window.Option(e,e,!1,!1))}),i.html(c.length?c:""),i.val(void 0!==d[n]&&d[n]?d[n]:"")}i.trigger("change")}}),s.find(".vp-control-gallery-additional-data-preview-image img").attr("src",c.children("img").attr("src")||""),s.find(".vp-control-gallery-additional-data-preview-name").html(p.filename),s.find(".vp-control-gallery-additional-data-preview-size").html(p.width+"x"+p.height+" ("+p.filesizeHumanReadable+")"),s.find(".vp-control-gallery-additional-data-preview-edit a").attr("href",p.editLink.replace("&amp;","&")),c.siblings().removeClass("active"),c.addClass("active"),l.addClass("active"),E=S.find(".vp-control-gallery-additional-data.active").length}function d(e,t){if(O&&(t=!1,O=!1),c&&c.css_editor_error_notice){var a=!1;if(1===e.length?a=c.css_editor_error_notice.singular.replace("%d","1"):e.length>1&&(a=c.css_editor_error_notice.plural.replace("%d",String(e.length))),a){var n=A.prev("#vp_custom_css_notice");if(n.length||t||(n=r('<div class="notice notice-error inline" id="vp_custom_css_notice"></div>'),A.before(n)),!n.length)return;var i='<p class="notification-message">'+a+'</p><p><input id="vp_custom_css_notice_prevent" type="checkbox"><label for="vp_custom_css_notice_prevent">'+c.css_editor_error_checkbox+"</label></p>";n.html(i)}else A.prev("#vp_custom_css_notice").remove()}}if("vp_lists"===g.val()&&f.length){var _=r(".vp-content-source"),y=_.find('[name="vp_content_source"]');_.on("click",".vp-content-source__item",function(){var e=r(this).attr("data-content");_.find('[data-content="'+e+'"]').addClass("active").siblings().removeClass("active"),y.val(e).change()}),_.children('[data-content="'+y.val()+'"]').click(),r.fn.conditionize&&f.conditionize(),r(".vp-control-range").each(function(){var e=r(this).find("input"),t=e.filter('[type="hidden"]');e.on("change input",function(a){e.val(r(this).val()),t.trigger("vp-fake-"+a.type)})}),r.fn.wpColorPicker&&r(".vp-color-picker").each(function(){function e(e){if(a)return void(a=!1);clearTimeout(t),t=setTimeout(function(){r(e.target).change()},300)}var t=void 0,a=!0;r(this).data("change",e).wpColorPicker()}),r.fn.imagepicker&&r(".vp-image-picker").imagepicker();var b=r(".vp_list_preview iframe"),w=!1,k=!1,C=r('<form target="vp_list_preview_iframe" method="post" style="display: none">').attr("action",b.attr("src")).insertAfter(f);r.fn.iFrameResize&&b.iFrameResize({interval:10});var x=void 0;f.on("change input vp-fake-change vp-fake-input",'[name*="vp_"]',function(t){var a=r(this);if(!a.closest(".vp-no-reload").length){if(r('[name="'+a.attr("name")+'__style[]"]').length)return void e();var n={name:a.attr("name"),value:a.is("[type=checkbox], [type=radio]")?a.is(":checked"):a.val(),reload:"change"===t.type||"vp-fake-change"===t.type,jQuery:k,$portfolio:w},i=C.find('[name="'+n.name+'"]');i.length||(i=r('<input type="hidden" name="'+n.name+'" />').appendTo(C)),i.attr("value",n.value),u.trigger("vp-preview-change",n),n.reload||e(),!n.reload&&w||(clearTimeout(x),x=setTimeout(function(){k=!1,w=!1,C.submit()},400))}}),b.on("load",function(){k=this.contentWindow.jQuery,w=k(".vp-portfolio"),e()}),u.on("vp-preview-change",function(e,t){if(t.$portfolio)switch(t.name){case"vp_layout":case"vp_tiles_type":case"vp_masonry_columns":case"vp_justified_row_height":case"vp_justified_row_height_tolerance":case"vp_slider_effect":case"vp_slider_speed":case"vp_slider_autoplay":case"vp_slider_centered_slides":case"vp_slider_loop":case"vp_slider_free_mode":case"vp_slider_arrows":case"vp_slider_arrows_icon_prev":case"vp_slider_arrows_icon_next":case"vp_slider_bullets":case"vp_slider_bullets_dynamic":case"vp_items_gap":var a=t.name;a=a.substring(3),a=a.replace(/_/g,"-"),t.$portfolio.attr("data-vp-"+a,t.value),t.$portfolio.vpf("init"),t.reload=!1;break;case"vp_filter_align":t.$portfolio.find(".vp-filter").removeClass("vp-filter__align-center vp-filter__align-left vp-filter__align-right").addClass("vp-filter__align-"+t.value),t.reload=!1;break;case"vp_pagination_align":t.$portfolio.find(".vp-pagination").removeClass("vp-pagination__align-center vp-pagination__align-left vp-pagination__align-right").addClass("vp-pagination__align-"+t.value),t.reload=!1;break;case"vp_controls_styles":var n=t.$portfolio.closest("html"),i="vp-controls-styles-"+h+"-inline-css",o=n.find("#"+i);o.length||(o=t.jQuery('<style id="'+i+'">'),n.find("body").prepend(o)),o.html(t.value),t.reload=!1;break;case"vp_custom_css":var r=t.$portfolio.closest("html"),l="vp-custom-css-"+h+"-inline-css",s=r.find("#"+l);s.length||(s=t.jQuery('<style id="'+l+'">'),r.find("body").prepend(s)),s.html(t.value),t.reload=!1;break;case"vp_list_name":case"vp_stretch":t.reload=!1}}),m.on("click",".vp-control-image-dropdown",function(e){r(e.target).closest(".vp-control-image-dropdown__content").length||r(this).toggleClass("active")}),m.on("mousedown",function(e){var t=r(e.target).closest(".vp-control-image-dropdown");r(".vp-control-image-dropdown.active").each(function(){this!==t[0]&&r(this).removeClass("active")})}),m.on("change",".vp-control-image-dropdown .vp-image-picker",function(){var e=r(this),t=e.data("picker");if(t){var a=t.select.find('option[value="'+t.select.val()+'"]'),n=a.parent("optgroup"),i=e.closest(".vp-control-image-dropdown"),o=a.attr("data-img-src");i.length&&(i.children(".vp-control-image-dropdown__preview").html('<img src="'+o+'" alt="">'),n.length&&i.children(".vp-control-image-dropdown__title").html(n.attr("label")))}});var j=r('[name="vp_list_name"]'),T=r('[name="post_title"]');j.length&&T.length&&(j.on("input",function(){T.val()!==j.val()&&T.val(j.val()).change()}),T.on("input",function(){j.val(T.val())})),r.fn.select2&&r(".vp-select2").each(function(){var e=r(this),t={width:"100%",minimumResultsForSearch:e.hasClass("vp-select2-nosearch")?-1:1,tags:e.hasClass("vp-select2-tags")},a=!!e.attr("data-post-type")&&r(e.attr("data-post-type"));e.closest(".vp-select2-posts-ajax").length&&(t=r.extend({minimumInputLength:1,ajax:{url:s,dataType:"json",delay:250,data:function(e){return{action:"vp_find_posts",q:e.term,post_type:!!a&&a.val(),nonce:c.nonce}},processResults:function(e){return{results:!(!e||!e.length)&&e}},cache:!0},escapeMarkup:function(e){return e},templateResult:function(e){if(e.loading)return e.text;var t="";e.title&&(t=e.title);var a="";e.post_type&&(a=e.post_type);var n="";return e.img&&(n="style=\"background-image: url('"+e.img+"');\""),'<div class="vp-select2-ajax__result"><div class="vp-select2-ajax__result-img" '+n+'></div><div class="vp-select2-ajax__result-data"><div class="vp-select2-ajax__result-title">'+t+'</div><div class="vp-select2-ajax__result-post-type">'+a+"</div></div></div>"},templateSelection:function(e){return e.title||e.text}},t)),e.closest(".vp-select2-taxonomies-ajax").length&&(t=r.extend({minimumInputLength:1,ajax:{url:s,dataType:"json",delay:250,data:function(e){return{action:"vp_find_taxonomies",q:e.term,post_type:!!a&&a.val(),nonce:c.nonce}},processResults:function(e){var t=[];return e&&Object.keys(e).forEach(function(a){t.push({text:a,children:e[a]})}),{results:t}},cache:!0}},t)),e.select2(t).data("select2").$dropdown.addClass("select2-vp-container")});var S=r(".vp-control-gallery"),E=0;if(r.fn.sortable&&(S.each(function(){var e=r(this),t=e.children(".vp-control-gallery-items-default");e.children(".vp-control-gallery-items").sortable({animation:150,draggable:".vp-control-gallery-items-img",onUpdate:function(){i(e)}}),e.on("click",".vp-control-gallery-items-remove",function(t){t.preventDefault(),r(this).parent().remove(),i(e)}),e.on("click",".vp-control-gallery-items-add",function(a){a.preventDefault();var n=e.data("wp-frame");return n?void n.open():wp.media?(n=wp.media({title:"Select or Upload Images",button:{text:"Use this images"},multiple:!0,library:{type:"image"}}),e.data("wp-frame",n),n.on("select",function(){var a=n.state().get("selection").models;a&&a.length&&(a.forEach(function(a){var n=a.changed.url;a.changed.sizes&&a.changed.sizes.thumbnail&&(n=a.changed.sizes.thumbnail.url);var i=t.children().clone();i.attr("data-image-id",a.id),i.children("img").attr("src",n),i.find('[data-meta="width"]').html(a.changed.width),i.find('[data-meta="height"]').html(a.changed.height),i.find('[data-meta="filename"]').html(a.changed.filename),i.find('[data-meta="editLink"]').html(a.changed.editLink),i.find('[data-meta="filesizeHumanReadable"]').html(a.changed.filesizeHumanReadable),e.find(".vp-control-gallery-items-add").before(i)}),i(e))}),void n.open()):void console.error("Can't access wp.media object.")}),e.on("click",".vp-control-gallery-items-img",function(t){t.preventDefault(),l(e,r(this).attr("data-image-id"))});var a=void 0;e.on("change input",".vp-control-gallery-additional-data [name]",function(){clearTimeout(a),a=setTimeout(function(){var t=e.children(".vp-control-gallery-additional-data"),a=e.children("textarea").attr("name"),n=e.children(".vp-control-gallery-items").find(".vp-control-gallery-items-img.active").attr("data-image-id");if(n){var l=e.children(".vp-control-gallery-items").find('[data-image-id="'+n+'"]');t.find('[name*="'+a+'_additional_"]').each(function(){var e=r(this).attr("name").replace(a+"_additional_","").replace("[]",""),t=r(this).val()||"";"object"===(void 0===t?"undefined":o(t))&&(t=JSON.stringify(t)),l.find('[data-additional="'+e+'"]').html(t||"")}),i(e)}},200)})}),S.length)){var z=S.children(".vp-control-gallery-additional-data");r(document).on("mousedown",function(e){if(E){var t=e.target;r(t).closest(".vp-control-gallery-additional-data, .vp-control-gallery-items-img, .select2-vp-container").length||(z.removeClass("active"),S.children(".vp-control-gallery-items").find(".vp-control-gallery-items-img.active").removeClass("active"),E=S.find(".vp-control-gallery-additional-data.active").length)}})}var A=r('[name="vp_custom_css"]'),L=!1,O=!0;if(void 0!==p&&A.length){if(c&&c.classnames){var $=p.hint.css;p.hint.css=function(e){var t=e.getCursor(),a=$(e)||{from:t,to:e.getCursor(),list:[]},n=e.getTokenAt(t);return"top"===n.state.state&&0===n.string.indexOf(".")&&(a={from:p.Pos(t.line,n.start),to:p.Pos(t.line,n.end),list:[]},c.classnames.forEach(function(e){-1!==e.indexOf(n.string)&&a.list.push(e)})),a}}var M=p.fromTextArea(A[0],{mode:"css",theme:"eclipse",indentUnit:4,autoCloseTags:!0,autoCloseBrackets:!0,matchBrackets:!0,foldGutter:!0,lint:{options:{errors:!0,"box-model":!0,"display-property-grouping":!0,"duplicate-properties":!0,"known-properties":!0,"outline-none":!0},onUpdateLinting:function(e,t,a){var n=[];e.forEach(function(e){"error"===e.severity&&n.push(e)}),a.vcLintErrors=n,L||d(a.vcLintErrors,!0)}},lineNumbers:!0,lineWrapping:!0,scrollPastEnd:!0,emmet_active:!0,emmet:!0,styleActiveLine:!0,continueComments:!0,scrollbarStyle:"simple",extraKeys:{"Ctrl-Space":"autocomplete","Ctrl-/":"toggleComment","Cmd-/":"toggleComment","Alt-F":"findPersistent"},gutters:["CodeMirror-lint-markers","CodeMirror-linenumbers","CodeMirror-foldgutter"]});v(M),A.data("CodeMirrorInstance",M),M.on("change",function(){M.save(),A.change()}),M.on("keyup",function(e,t){var a=/^[a-zA-Z]$/.test(t.key);if(!e.state.completionActive||!a){var n=e.getTokenAt(e.getCursor());if("string"!==n.type&&"comment"!==n.type){var i=e.doc.getLine(e.doc.getCursor().line).substr(0,e.doc.getCursor().ch);(a||":"===t.key||" "===t.key&&/:\s+$/.test(i))&&e.showHint({completeSingle:!1})}}})}var P=!1;m.on("click","#publish:not(.disabled)",function(e){if(P=!0,!L){var t=r(this),a=A.length&&A.data("CodeMirrorInstance");a&&a.vcLintErrors&&a.vcLintErrors.length&&(e.preventDefault(),t.addClass("disabled button-disabled button-primary-disabled"),setTimeout(function(){t.removeClass("disabled button-disabled button-primary-disabled")},1500),d(a.vcLintErrors,!1),r("html,body").animate({scrollTop:r("#vp_custom_css").offset().top-100},300),a.focus(),a.setCursor(a.vcLintErrors[0].from.line))}});var R=f.serialize();r(window).on("beforeunload",function(){return P?void(P=!1):R!==f.serialize()||void 0}),m.on("change","#vp_custom_css_notice_prevent",function(){L=!0,r(this).closest(".notice").slideUp()})}}(),m.hasClass("portfolio_page_visual-portfolio-settings")&&(m.on("change",'[name="vp_popup_gallery[show_caption]"]',i),u.on("ready",i),i())}});